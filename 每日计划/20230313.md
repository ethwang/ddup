## 结果
  - 写简历
  - 如何保证分布式系统一致性


STAR法则:S(情景(背景))：T(任务)+A(行动)+R(结果)
## 专业技能
熟练使用golang,有三年golang开发经验
熟悉redis/mysql数据库
了解操作系统和网络的基本知识
掌握基本数据结构和算法原理
有分布式系统开发经验


## 工作经历
2020.05-2023.02 北京嘀嘀无限科技发展有限公司 智能中台/账单计价 软件开发工程师


## 项目经历
异地双活
  - 问题
    - 1. 禁写后写redis失败账单如何操作
    - 2. redis双主同步 oplog是怎么保证增量复制的:记录每条数据时都会记录opInfo结构,opinfo中opid自增
【s】公司主导在不同地域建立数据中心（即redis集群）做灾备恢复,每个数据中心都正常接入线上流量(可读可写)
【t】账单实现按城市维度单元化(同一个key不在两机房双写)写入redis机房和切流
【a】流量染色和转发:上游http请求header中增加分流key字段(以订单起点城市为准),中台inrouter层从header中解析城市信息，根据规则路由到相应机房的账单系统，账单系统实现单元化的写入redis操作(账单写入redis的key无城市信息,所以直接通过inroute层分流实现)。按城市维度的切流时，会出现中间状态(一部分机器已经切流完成一部分没有完成会出现同一个key双写两个机房的情况)，解决方案是账单会在key中携带城市信息给到redis，redis会根据城市信息禁写(禁止该key写入redis集群)来保证切流过程中不会发生双写
【r】城市群的分钟级切流,由切流引起的线上badcase数量级在个位数级别(超时问题)

预估计价详情页解偶和降级
【s】乘客在打车前会先预估行程的总价，在调用账单预估接口获取总价的同时，也会返回预估计价详情信息页信息(携带文案),但是该页面入口较深乘客一般不会点击查看
【t】将预估详情页和预估接口进行解偶并支持详情页降级操作
【a】将预估计价信息存入redis中并且写入过期时间(过期时间可降级);当乘客点击预估详情页时，读取预估计价信息缓存并请求下游账单渲染系统返回计价详情页，如果缓存过期失效，则直接给用户展示总价兜底
【r】降低预估接口耗时最高40ms,高峰期降低了20ms-30ms;减少预估接口响应数据量,优化前247k,优化后133k,减少了46%




