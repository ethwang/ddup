1. 浏览器访问网址发生了什么?
2. tcp实现细节；
3. http实现细节；
4. https与http区别，加密过程；
5. epoll实现细节，与select区别; 
6. 流量控制和拥塞控制的区别



1. 浏览器访问网址发生了什么? 
   1. 域名解析成ip地址
   2. 与目的主机进行tcp链接(三次握手)
   3. 发送与收取数据(http协议)
   4. 与目的主机断开tcp链接(四次挥手)
2. tcp
    - 三次握手
      - 作用
        - 同步双方序列号(只有同步了序列号才有可靠的传输),tcp许多特性都依赖序列号:
          - 接收方通过序列号去重和排序
          - 发送方在对应数据包未被ack时，重新发送
    - 四次挥手
    - 四次挥手time_wait的作用
      - 主动关闭连接的一方才会出现time_wait状态
      - 作用  
        - 保证连接的可靠关闭,避免重发的fin报文误关闭新链接
        - 避免本次链接的报文在新链接中造成的错乱
      - 为什么time_wait等待2msl呢（msl报文最大存活时间）
        - 允许ack报文丢失且能再次收到被动方发来的FIN报文来重新进行连接的可靠关闭
    - 重传机制
      - 定时传输
    - 拥塞控制(作用于网络防止过多的数据包注入到网络造成网络负载过高的情况) 发送窗口=min(拥塞窗口，接收窗口)
      - 慢开始
        - 为啥要慢开始？
          - 刚开始链接建立后，发送方不了解网络负载能力，所以此时会调整拥塞窗口到一个比较小的值同时为了能快速探测到网络的负载上限，会以指数速度调整拥塞窗口的大小(每次发送方收到ack都将拥塞窗口加一)
        - 什么情况下结束慢开始阶段?
          - 通过定时器发现了丢包的情况:1.降低拥塞窗口的数量;2.发生丢包时的拥塞窗口记为慢开始的阈值;
          - 拥塞窗口到达了慢开始设定的阈值:启动拥塞避免算法:每个rtt内拥塞窗口加一(线性增加)(一个rtt有多个报文同时发送)
          - 发送方接收到了重复的ack报文
            - 接受方启动快速重传算法:后续会一直发送未收到包的ack,直到收到了该包;发送方在收到三个重复的ack时，会发送该ack对应丢失的包，同时将拥塞窗口降低为原来的一半，并且将慢启动阈值设置成当前的拥塞窗口。此时会启动快速恢复算法，此时接收方发来的重复的ack包会使得拥塞窗口增加直到收到下一个不重复ack包时，会启动拥塞避免算法。
      - 拥塞避免
        - 当拥塞窗口大于慢启动阈值时，会启动拥塞避免算法。拥塞避免算法会线性的增加拥塞窗口的值(也就是每个rtt拥塞窗口加一)
      - 快速重传
        - 接受方在未接收到某个包时，会重复的发送该包的ack给发送方,发送方在接受到三个重复的ack包时立即重传该包,而不是等待发送方超时重传
        - 将慢启动阈值和拥塞窗口降到之前的一半
      - 快速恢复
        - 设置拥塞窗口值和慢开始阈值一致(而不是像慢开始一样将拥塞窗口值设置为初始大小),执行拥塞避免算法
    - 流量控制
      - 发送窗口
        - 发送方报文协议中会有发送窗口大小
      - 接受窗口
        - 接收方报文协议中会有接受窗口大小
    - 分段传输(tcp最大报文段长度是mss)

3. http(超文本传输协议)
    - 为什么说http协议是无状态协议？怎么解决http协议无状态？
      - http协议是不保存状态的,不对请求和响应的通信状态保存。
      - 使用cookie和session来保存状态
        - cookie:服务端生成给到客户端，客户端每次请求服务端都带cookie，通过cookie来保存多次会话的状态
        - session:服务端生成。。。。
    - http如何实现持久化链接的？
      - keep-alive机制:在http1.0默认关闭的，通过http请求头设置"connection:keep-alive"开启；在http1.1默认开启的,通过http请求头设置"connection:cloase"关闭
      - 开启后,在一次http请求响应后，tcp链接在一定时间内不会断开。这段时间内(进行心跳信息的交互)，如果同一个客户端再次发送http请求就可以复用tcp链接了，此时也会重置tcp断开计时器，接下来一段时间可以继续复用直到计时器超时。
      - tcp保活机制:tcp协议中，提供了keepalive报文用来检测对端是否存活，如果对端不存活了，可以释放半打开的tcp链接
      - 总结
        - http的keep-alive是为了让tcp链接活的更久一点，使尽可能多的http请求可以复用同一个tcp链接。优点:减少频繁建立tcp链接的性能损耗(减少了服务端time_wait数量)，提高传输效率；缺点：当请求特别多的时候，维持每个请求的长链接有系统开销。适合长链接的场景有：同一个客户端频繁和服务器交互，即时通信工具; 
        - tcp的keepalive目的时检测对端是否存活,如果不存活，主动关闭此次链接，从而减少半打开链接的数量 
    - http断点续传实现
      - http请求头中有range字段,可以标识出服务器下一次从第几个字节开始传输
      - http响应头中有content-range返回当前接受的范围和文件总大小
    - http状态码
      - 2xx:成功
      - 3xx:重定向状态码，表示需要附加操作才能完成请求
      - 4xx:客户端误状态码
      - 5xx:服务器错误状态码
    - http报文
      - 请求报文
        - 请求行:包含请求方法,URL,HTTP版本信息
        - 请求头
        - 请求内容
      - 响应报文
        - 响应行:包含HTTP版本，状态码，状态码文本描述
        - 响应头
        - 响应内容
    - get和post
      - get请求指定url获得资源
      - post提交对url资源的修改和新增操作
    - tcp/ip五层协议
      - 应用层 http
      - 传输层 tcp
      - 网络层 ip
      - 数据链路层 以太网(帧)
      - 物理层
    - http是全双工还是半双工？
      - 半双工:数据可以在两个方向传输，但是某个时间只能在一个方向上传输

4. https和http的区别(http是明文传输，https是加密传输),https如何加密传输的？(对称加密算法加密数据+非对称加密算法加密对称密钥+数字证书)
  - 服务端发送证书(公钥)给到客户端，客户端验证公钥的有效性(使用公钥解密证书数据与证书明文对比)，如果有效
  - 客户端使用公钥对对称密钥加密发送给服务端
  - 服务端收到后用私钥解密获取到对称加密密钥，使用对称加密后的数据传输给客户端
  - 客户端使用对称加密密钥解密后获取到内容

5. 流量控制和拥塞控制的区别
  - 流量控制
  - 拥塞控制
    - 慢启动
      - 每次收到ack增加一个mss(成倍增长)
    - 拥塞避免
      - 每个rtt增加一个mss(线性增加)
    - 快重传
    - 快恢复
  - 区别
    - 拥塞控制是作用于网络的它防止过多的数据注入到网络中避免出现网络负载过大的情况，
    - 流量控制是作用于接收者的它是控制发送者的发送速度从而是接收者可以来得及接受，防止分组丢失